{% extends "base.html" %}
{% load static %}
{% load geojson_tags %}

{% block content %}
            {% if request.get_full_path == '/' %}
        {% endif %}
         {% if request.get_full_path == '/search/' %}
        {% endif %}
        {% if not request.get_full_path == '/'  %}

     <div></div>
    <div>
        <div class="container">
            <div class="row">
                <div class="col-md-6">

  {% if request.get_full_path == '/table/diaries/' %}
<div class="btn-group" role="group">
    <button class="btn btn-primary active" type="button" onclick="window.location.href='{% url 'table' 'diaries' %}'"><i class="fa fa-book"></i>&nbsp;дневники&nbsp;</button>
    <button class="btn btn-primary" type="button" onclick="window.location.href='{% url 'table' 'people' %}'"><i class="fa fa-user-o"></i>&nbsp;люди&nbsp;</button>
    <button class="btn btn-primary" type="button" type="button" onclick="window.location.href='{% url 'table' 'places' %}'"><i class="fa fa-map-marker"></i>&nbsp;местa</button>
    <button class="btn btn-primary" type="button" type="button" onclick="window.location.href='{% url 'table' 'entries' %}'"><i class="fa fa-pencil-square-o"></i>&nbsp;дневниковые записи</button></div>
</div>

                <div class="col-md-6">
                    <div class="btn-group" role="group">
                        <button onclick="window.location.href='{% url 'table' 'diaries' %}'" class="btn btn-primary active" type="button"><i class="fa fa-table"></i> таблица</button>
                        <button onclick="window.location.href='{% url 'chart' 'diaries' %}'" class="btn btn-primary" type="button"><i class="fa fa-bar-chart"></i> график</button>
                        <button onclick="window.location.href='{% url 'map' 'diaries' %}'" class="btn btn-primary" type="button"><i class="fa fa-map"></i> карта</button></div>

                     </div>
                </div>
        </div>
    </div>

    <div></div>
    <div>
  {% endif %}

{% if request.get_full_path == '/map/people/' %}
<div class="btn-group" role="group">
    <button class="btn btn-primary" type="button" onclick="window.location.href='{% url 'map' 'diaries' %}'"><i class="fa fa-user-o"></i>&nbsp;дневники&nbsp;</button>
    <button class="btn btn-primary active" type="button" onclick="window.location.href='{% url 'map' 'people' %}'"><i class="fa fa-user-o"></i>&nbsp;люди&nbsp;</button>
    <button class="btn btn-primary" type="button" onclick="window.location.href='{% url 'map' 'places' %}'"><i class="fa fa-map-marker"></i>&nbsp;местa</button>
    <button class="btn btn-primary" type="button" onclick="window.location.href='{% url 'map' 'entries' %}'"><i class="fa fa-book"></i>&nbsp;дневниковые записи</button></div>
</div>

                <div class="col-md-6">
                    <div class="btn-group" role="group">
                        <button onclick="window.location.href='{% url 'table' 'people' %}'" class="btn btn-primary" type="button"><i class="fa fa-table"></i> таблица</button>
                        <button onclick="window.location.href='{% url 'chart' 'people' %}'" class="btn btn-primary" type="button"><i class="fa fa-bar-chart"></i> график</button>
                        <button onclick="window.location.href='{% url 'map' 'people' %}'" class="btn btn-primary active" type="button"><i class="fa fa-map"></i> карта</button></div>
                     </div>
                </div>
        </div>
    </div>

    <div></div>
    <div>

 {% endif %}

{% if request.get_full_path == '/map/places/' %}
<div class="btn-group" role="group">
    <button class="btn btn-primary" type="button" onclick="window.location.href='{% url 'map' 'diaries' %}'"><i class="fa fa-user-o"></i>&nbsp;дневники&nbsp;</button>
    <button class="btn btn-primary" type="button" onclick="window.location.href='{% url 'map' 'people' %}'"><i class="fa fa-user-o"></i>&nbsp;люди&nbsp;</button>
    <button class="btn btn-primary active" type="button" onclick="window.location.href='{% url 'map' 'places' %}'"><i class="fa fa-map-marker"></i>&nbsp;местa</button>
    <button class="btn btn-primary" type="button" onclick="window.location.href='{% url 'map' 'entries' %}'"><i class="fa fa-book"></i>&nbsp;дневниковые записи</button></div>
</div>

                <div class="col-md-6">
                    <div class="btn-group" role="group">
                        <button onclick="window.location.href='{% url 'table' 'places' %}'" class="btn btn-primary" type="button"><i class="fa fa-table"></i> таблица</button>
                        <button onclick="window.location.href='{% url 'chart' 'places' %}'" class="btn btn-primary" type="button"><i class="fa fa-bar-chart"></i> график</button>
                        <button onclick="window.location.href='{% url 'map' 'places' %}'" class="btn btn-primary active" type="button"><i class="fa fa-map"></i> карта</button></div>
                     </div>
                </div>
        </div>
    </div>

    <div></div>
    <div>

 {% endif %}

{% if request.get_full_path == '/map/entries/'%}
<div class="btn-group" role="group">
    <button class="btn btn-primary" type="button" onclick="window.location.href='{% url 'map' 'diaries' %}'"><i class="fa fa-user-o"></i>&nbsp;дневники&nbsp;</button>
    <button class="btn btn-primary" type="button" onclick="window.location.href='{% url 'map' 'people' %}'"><i class="fa fa-user-o"></i>&nbsp;люди&nbsp;</button>
    <button class="btn btn-primary" type="button" onclick="window.location.href='{% url 'map' 'places' %}'"><i class="fa fa-map-marker"></i>&nbsp;местa</button>
    <button class="btn btn-primary active" type="button" onclick="window.location.href='{% url 'map' 'entries' %}'"><i class="fa fa-book"></i>&nbsp;дневниковые записи</button></div>
</div>

                <div class="col-md-6">
                    <div class="btn-group" role="group">
                        <button onclick="window.location.href='{% url 'table' 'entries' %}'" class="btn btn-primary" type="button"><i class="fa fa-table"></i> таблица</button>
                        <button onclick="window.location.href='{% url 'chart' 'entries' %}'" class="btn btn-primary" type="button"><i class="fa fa-bar-chart"></i> график</button>
                        <button onclick="window.location.href='{% url 'map' 'entries' %}'" class="btn btn-primary active" type="button"><i class="fa fa-map"></i> карта</button></div>
                     </div>
                </div>
        </div>
    </div>

    <div></div>
    <div>

 {% endif %}
        {% endif %}

        <!-- Leaflet imports, js for autocomplete -->
<!-- Leaflet references -->
 <link rel="stylesheet" href="https://unpkg.com/leaflet@1.5.1/dist/leaflet.css" integrity="sha512-xwE/Az9zrjBIphAcBb3F6JVqxf46+CDLwfLMHloNu6KEQCAWi6HcDUbeOfBIptF7tcCzusKFjFw2yuvEpDL9wQ==" crossorigin=""/>
    <script src="https://unpkg.com/leaflet@1.5.1/dist/leaflet.js" integrity="sha512-GffPMF3RvMeYyc1LWMHtK8EbPv0iNZ8/oTtHPx9/cc2ILxQ+u905qIwdpULaqDkyBKgOaB57QTMg7ztg8Jm2Og==" crossorigin=""></script>

        <!-- Load Esri Leaflet from CDN -->
    <script src="https://unpkg.com/esri-leaflet@2.3.0/dist/esri-leaflet.js"
    integrity="sha512-1tScwpjXwwnm6tTva0l0/ZgM3rYNbdyMj5q6RSQMbNX6EUMhYDE3pMRGZaT41zHEvLoWEK7qFEJmZDOoDMU7/Q=="
    crossorigin=""></script>

<div class="container">
  <div class="row">
    <div class="col-sm-12">
<div id="mapid" style="width: 1200px; height: 1200px;"></div>
    </div>
  </div>
</div>
        <script>

    
    var mymap = L.map('mapid').setView([53.227831, 44.997345], 5);


       L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpejY4NXVycTA2emYycXBndHRqcmZ3N3gifQ.rJcFIG214AriISLbB6B5aw', {
      	maxZoom: 18,
      	attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, ' +
      		'<a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, ' +
      		'Imagery © <a href="https://www.mapbox.com/">Mapbox</a>',
      	id: 'mapbox.streets'
      }).addTo(mymap);


      //==========================
     //Things that Andy has added
     //==========================
     var data = {{ places|geojsonfeature:"popupContent"|safe }};
      L.geoJson(data, {
              onEachFeature: function onEachFeature(feature, layer) {
                var props = feature.properties.popupContent;
                var content = `<p>${props}</p>`;
                layer.bindPopup(content);
            }}).addTo(mymap);

    L.control.zoom({
      position:'topright'
    }).addTo(mymap);

  </script>
 <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-slider/10.0.0/bootstrap-slider.min.js"></script>

{% endblock %}
